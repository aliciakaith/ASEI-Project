<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deployments</title>

  <!-- Tailwind CDN + darkMode config -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script> tailwind.config = { darkMode: 'class' } </script>

  <!-- Persisted theme -->
  <script>
    (function () {
      const KEY = 'connectify.theme';
      const saved = localStorage.getItem(KEY);
      if (saved === 'dark') document.documentElement.classList.add('dark');
      else {
        document.documentElement.classList.remove('dark');
        if (saved !== 'light') localStorage.setItem(KEY, 'light');
      }
    })();
  </script>

  <link rel="icon" type="image/png" href="images/connectify_logo.png" />
</head>
<body class="bg-neutral-50 text-neutral-900 dark:bg-neutral-900 dark:text-neutral-100">

  <!-- Sidebar -->
  <aside class="fixed inset-y-0 left-0 w-60 bg-neutral-100 text-neutral-900 dark:bg-neutral-800/40 dark:text-neutral-100 flex flex-col">
    <div class="px-4 py-4 flex items-center gap-2 border-b border-neutral-400 dark:border-gray-400/70">
      <img src="images/connectify_logo.png" alt="Logo" class="h-8 w-auto">
      <span>Connectify</span>
    </div>

    <nav class="p-2 text-sm space-y-1 flex-1">
      <a href="asei_dashboard.html" class="flex items-center gap-2 px-3 py-2 rounded hover:bg-neutral-400/70 dark:hover:bg-neutral-700">
        <span class="inline-flex h-6 w-6 shrink-0 items-center justify-center text-[#30438a] dark:text-[#90a4ae]">
          <!-- icon -->
        </span>
        <span class="hidden sm:inline">Dashboard</span>
      </a>

      <a href="flow_designer.html" class="flex items-center gap-2 px-3 py-2 rounded hover:bg-neutral-400/70 dark:hover:bg-neutral-700">
        <span class="inline-flex h-6 w-6 shrink-0 items-center justify-center text-[#30438a] dark:text-[#90a4ae]">
          <!-- icon -->
        </span>
        <span class="hidden sm:inline">Flow Designer</span>
      </a>

      <a href="connectors.html" class="flex items-center gap-2 px-3 py-2 rounded hover:bg-neutral-400/70 dark:hover:bg-neutral-700">
        <span class="inline-flex h-6 w-6 shrink-0 items-center justify-center text-[#30438a] dark:text-[#90a4ae]">
          <!-- icon -->
        </span>
        <span class="hidden sm:inline">Connectors</span>
      </a>

      <a href="templates.html" class="flex items-center gap-2 px-3 py-2 rounded hover:bg-neutral-400/70 dark:hover:bg-neutral-700">
        <span class="inline-flex h-6 w-6 shrink-0 items-center justify-center text-[#30438a] dark:text-[#90a4ae]">
          <!-- icon -->
        </span>
        <span class="hidden sm:inline">Templates</span>
      </a>

      <!-- Current page -->
      <a href="deployments.html" class="flex items-center gap-2 px-3 py-2 rounded bg-neutral-300 dark:bg-neutral-800">
        <span class="inline-flex h-6 w-6 shrink-0 items-center justify-center text-[#30438a] dark:text-[#90a4ae]">
          <!-- icon -->
        </span>
        <span class="hidden sm:inline">Deployments</span>
      </a>

      <a href="monitoring.html" class="flex items-center gap-2 px-3 py-2 rounded hover:bg-neutral-400/70 dark:hover:bg-neutral-700">
        <span class="inline-flex h-6 w-6 shrink-0 items-center justify-center text-[#30438a] dark:text-[#90a4ae]">
          <!-- icon -->
        </span>
        <span class="hidden sm:inline">Monitoring</span>
      </a>

      <a href="settings.html" class="flex items-center gap-2 px-3 py-2 rounded hover:bg-neutral-400/70 dark:hover:bg-neutral-700">
        <span class="inline-flex h-6 w-6 shrink-0 items-center justify-center text-[#30438a] dark:text-[#90a4ae]">
          <!-- icon -->
        </span>
        <span class="hidden sm:inline">Settings</span>
      </a>
    </nav>

    <div class="relative">
      <div id="profileBtn" class="w-full px-4 py-4 flex items-center gap-2 border-t border-neutral-400 dark:border-gray-400/70 text-left">
        <img id="initialSidebarPfp" src="images/default_avatar.png" class="js-initial-pfp h-8 w-8 rounded-full object-cover" alt="O Pfp"/>
        <img id="mainPfp" class="js-main-pfp h-8 w-8 rounded-full object-cover hidden" alt="N Pfp"/>
        <span class="text-sm font-medium">Insert User Name</span>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="ml-40 md:ml-64 p-4 sm:p-6 overflow-x-auto space-y-6">

    <!-- Header -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2">
      <h2 class="text-2xl font-semibold">Deployments</h2>
      <button id="newDeploymentBtn" class="px-4 py-2 bg-blue-600 text-white rounded w-full sm:w-auto">+ New Deployment</button>
    </div>

    <!-- KPI Cards -->
    <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <div class="bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl p-4 shadow-sm">
        <div class="text-2xl font-semibold text-green-600">6</div>
        <div class="text-xs text-neutral-500 dark:text-neutral-400">Active Deployments</div>
      </div>
      <div class="bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl p-4 shadow-sm">
        <div class="text-2xl font-semibold text-yellow-600">2</div>
        <div class="text-xs text-neutral-500 dark:text-neutral-400">In Progress</div>
      </div>
      <div class="bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl p-4 shadow-sm">
        <div class="text-2xl font-semibold text-red-600">1</div>
        <div class="text-xs text-neutral-500 dark:text-neutral-400">Failed</div>
      </div>
      <div class="bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl p-4 shadow-sm">
        <div class="text-2xl font-semibold text-neutral-700 dark:text-neutral-200">9</div>
        <div class="text-xs text-neutral-500 dark:text-neutral-400">Total Deployments</div>
      </div>
    </section>

    <!-- Overview -->
    <section class="bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-sm border border-neutral-200 dark:border-neutral-700">
      <h3 class="text-lg font-semibold mb-2">Deployment Overview</h3>
      <p class="text-sm text-neutral-500 dark:text-neutral-400 mb-4">
        This dashboard provides insights into your current and past deployments.
      </p>
      <div class="h-48 bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-neutral-700 dark:to-neutral-600 rounded-lg flex items-center justify-center text-neutral-400">
        ðŸ“ˆ Chart Placeholder â€” Deployment Trends Coming Soon
      </div>
    </section>

    <!-- Table -->
    <section class="bg-white dark:bg-neutral-800 rounded shadow border border-neutral-200 dark:border-neutral-700">
      <div class="flex justify-between items-center p-4 border-b border-neutral-100 dark:border-neutral-700">
        <h3 class="font-semibold text-lg">Recent Deployments</h3>
        <select class="border rounded px-3 py-2 text-sm bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600">
          <option>All Environments</option>
          <option>Production</option>
          <option>Test</option>
          <option>Sandbox</option>
        </select>
      </div>

      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-neutral-200 dark:bg-neutral-700">
            <tr>
              <th class="p-3 text-left">Flow Name</th>
              <th class="p-3 text-left">Environment</th>
              <th class="p-3 text-left">Version</th>
              <th class="p-3 text-left">Status</th>
              <th class="p-3 text-left">Deployed At</th>
              <th class="p-3 text-left">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-t border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700/50">
              <td class="p-3">Payment Flow</td>
              <td class="p-3">Production</td>
              <td class="p-3">v3.2.1</td>
              <td class="p-3"><span class="px-2 py-1 bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 text-xs rounded">Active</span></td>
              <td class="p-3 text-xs text-neutral-500 dark:text-neutral-400">2025-10-20 15:40</td>
              <td class="p-3 space-x-2">
                <button class="px-2 py-1 bg-neutral-200 dark:bg-neutral-700 rounded text-xs">Rollback</button>
              </td>
            </tr>
            <!-- repeat rows with same classes -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Activity -->
    <section class="bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-sm border border-neutral-200 dark:border-neutral-700">
      <h3 class="text-lg font-semibold mb-4">Recent Activity</h3>
      <ul class="space-y-4 text-sm">
        <li class="flex items-start gap-3">
          <span class="h-3 w-3 mt-1 bg-green-500 rounded-full"></span>
          <div>
            <p><strong>Payment Flow</strong> successfully deployed to <span class="text-green-600 dark:text-green-400">Production</span>.</p>
            <p class="text-neutral-500 dark:text-neutral-400 text-xs">Oct 20, 2025 - 3:40 PM</p>
          </div>
        </li>
        <!-- more items -->
      </ul>
    </section>

    <!-- Info -->
    <section class="bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-sm border border-neutral-200 dark:border-neutral-700">
      <h3 class="text-lg font-semibold mb-2">About Deployments</h3>
      <p class="text-sm text-neutral-600 dark:text-neutral-400">
        Deployments are the process of pushing your configured data flows and integrations into specific environments.
      </p>
    </section>
  </main>

  <!-- Modal -->
  <div id="deployModal" class="fixed inset-0 bg-black/50 hidden grid place-items-center z-50">
    <div class="bg-white dark:bg-neutral-900 rounded-xl p-6 w-11/12 sm:w-96 border border-neutral-200 dark:border-neutral-700">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold">New Deployment</h2>
        <button id="closeDeploy" class="text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-200">&times;</button>
      </div>
      <form id="deployForm">
        <div class="mb-3">
          <label class="block text-sm font-medium mb-1">Flow Name</label>
          <input type="text" required class="w-full border border-neutral-300 dark:border-neutral-600 rounded px-3 py-2 bg-white dark:bg-neutral-800" placeholder="Enter flow name">
        </div>
        <div class="mb-3">
          <label class="block text-sm font-medium mb-1">Environment</label>
          <select class="w-full border border-neutral-300 dark:border-neutral-600 rounded px-3 py-2 bg-white dark:bg-neutral-800">
            <option>Production</option>
            <option>Test</option>
            <option>Sandbox</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="block text-sm font-medium mb-1">Version</label>
          <input type="text" required class="w-full border border-neutral-300 dark:border-neutral-600 rounded px-3 py-2 bg-white dark:bg-neutral-800" placeholder="e.g. v1.0.0">
        </div>
        <div class="flex justify-end gap-2 pt-2">
          <button type="button" id="cancelDeploy" class="px-4 py-2 rounded-lg bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600">Cancel</button>
          <button type="submit" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Deploy</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Modal logic
    const modal = document.getElementById("deployModal");
    const newBtn = document.getElementById("newDeploymentBtn");
    const closeBtn = document.getElementById("closeDeploy");
    const cancelBtn = document.getElementById("cancelDeploy");

    function openModal() { modal.classList.remove("hidden"); }
    function closeModal() { modal.classList.add("hidden"); }

    newBtn?.addEventListener("click", openModal);
    closeBtn?.addEventListener("click", closeModal);
    cancelBtn?.addEventListener("click", closeModal);
    window.addEventListener("click", e => { if (e.target === modal) closeModal(); });

    document.getElementById("deployForm").addEventListener("submit", e => {
      e.preventDefault();
      closeModal();
      alert("âœ… Deployment initiated successfully!");
    });
  </script>
</body>
</html>
